# 📸 摄像头使用指南

## ⚠️ 重要说明

经过检测，你的摄像头使用**macOS AVFOUNDATION后端**，由于macOS的安全限制，**无法通过软件直接控制对焦、曝光等参数**。

## 🔍 实际情况

- **摄像头后端**: AVFOUNDATION (macOS系统控制)
- **软件控制**: 不支持直接参数调整
- **系统管理**: 摄像头参数由macOS自动管理

## 💡 替代优化方案

### 🎯 系统级优化
1. **使用系统相机应用**预先调整摄像头设置
2. **确保良好的环境光线**，减少自动调整频率
3. **保持固定距离**，让自动对焦稳定在合适位置
4. **使用三脚架**固定摄像头，避免手抖

### ⚡ 软件级优化
- **智能区域检测**: 只处理中心40%区域，提升速度
- **自适应跳帧**: 动态调整检测频率
- **多尺度检测**: 3个不同尺度确保识别成功率
- **OpenCV优先**: 使用更快的检测算法
- **结果缓存**: 避免重复计算

## 🎮 可用控制按键

### 基本控制
- `q`: 退出程序
- `d`: 切换调试模式

### 性能优化
- `s`: 切换简化预处理
- `o`: 切换OpenCV/pyzbar检测器
- `a`: 切换自适应优化
- `r`: 调整检测区域大小 (40%→70%→100%)
- `c`: 清除检测缓存

### 信息显示
- `i`: 显示摄像头信息
- `h`: 显示性能提示
- `w`: 切换警告显示

## 📋 使用建议

### 🎯 4K QR码扫描最佳实践

1. **环境设置**:
   - 确保充足且均匀的光线
   - 避免强烈阴影或反光
   - 保持摄像头与QR码30-100cm距离

2. **硬件设置**:
   - 使用三脚架固定摄像头
   - 确保QR码平整无折叠
   - 保持QR码垂直于摄像头

3. **软件设置**:
   - 4K模式下建议使用40%检测区域
   - 启用OpenCV检测器 (默认开启)
   - 开启自适应优化

### 🔧 故障排除

1. **检测速度慢**:
   - 按 `r` 减小检测区域
   - 按 `s` 启用简化预处理
   - 按 `c` 清除缓存

2. **识别不稳定**:
   - 按 `i` 查看摄像头信息
   - 改善光线条件
   - 减少摄像头抖动

3. **帧率过低**:
   - 按 `h` 查看性能提示
   - 按 `a` 启用自适应优化
   - 考虑降低分辨率

## 📊 实际性能

| 分辨率 | 实际FPS | 检测精度 | 推荐场景 |
|--------|---------|----------|----------|
| **4K (3840×2160)** | **12+ FPS** | **最高** | **高质量扫描** |
| 1080p (1920×1080) | 25+ FPS | 高 | 平衡模式 |
| 720p (1280×720) | 30+ FPS | 中等 | 高速扫描 |

## 🎯 推荐设置组合

### 📱 手机QR码扫描 (20-50cm)
```
对焦值: 50-80
曝光值: -4 到 -6
检测区域: 40%
```

### 📄 纸质QR码扫描 (30-100cm)
```
对焦值: 20-50
曝光值: -5 到 -7
检测区域: 70%
```

### 🖥️ 屏幕QR码扫描 (50-150cm)
```
对焦值: 0-30
曝光值: -6 到 -8
检测区域: 70%
```

## ⚡ 性能提升

通过启用定焦模式和手动设置，你可以获得：

- ✅ **稳定的图像质量** - 无自动调整波动
- ✅ **更快的检测速度** - 减少对焦延迟
- ✅ **一致的识别结果** - 固定参数确保稳定性
- ✅ **更低的CPU使用** - 减少自动调整开销

## 🔄 快速切换

实际使用中可以快速在不同模式间切换：

1. **标准模式**: `f` (定焦) + `r` (40%区域)
2. **高质量模式**: `f` (自动) + `r` (100%区域) 
3. **高速模式**: `f` (定焦) + `s` (简化预处理)

---

💡 **提示**: 首次使用时，建议按 `v` 键查看当前设置，然后根据实际环境调整参数。 